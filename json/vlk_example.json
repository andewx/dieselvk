{
    "schema": "vlk",
    "config" : {
        "instance_name":"diesel vulkan",
        "instance_version": "0.0.1",
        "core_extensions":[
            "VK_KHR_surface",
            "VK_KHR_swapchain",
            "VK_KHR_portability_subset"
        ],
        "user_extensions":[
            "VK_KHR_device_group",
            "VK_KHR_device_group_creation"
        ],
        "vulkan_layers":[
            "VK_EXT_debug_report",
            "VK_EXT_debg_util",
            "VK_LAYER_KHRONOS_validation"
        ],
        "swapchain_size":3,
        "swapchains":[
            {
                "color_attachment": "color_attachment0",
                "depth_attachment": "depth_attachment0"
            }
        ],
        "window":{
            "width":1024,
            "height":1024
        },
        "device_mode": "PipelineBindPointGraphics",
        "display":"true"
    },
    "pipelines":[
        {
        "name":"pipe0",
        "renderpass":"renderpass0",
        "subpass":0,
        "topology":"PrimitiveTopologyTriangleList",
        "cull_mode":"CullNone",
        "line_width":1.0,
        "front_face":"FrontFaceClockwise",
        "program":"program_0",
        "depth":{
            "bias_constant":0.0,
            "bias_clamp":0.0,
            "bias_slope":0.0
        },
        "mssa":{
            "enable":false,
            "bit_sample":"SampleCount1Bit",
            "min_sample_shading":1.0,
            "alpha_enable":false,
            "alpha_one":false
        },
        "attachment_blend":{
            "blend_mode":"False",
            "write_mode":"ColorComponentRBit | ColorComponentGBit |ColorComponentBBit| ColorComponentABit"
        },
        "mesh_descriptor":{
            "name":"std_mesh",
            "description":"Layout as follows, [vertex, normal, uv, color] with associated indices buffer and data is allocated in sequential blocks",
            "indices_buffer": true,
            "vertex_binding":{
                "binding": 0,
                "stride_bytes":44,
                "rate":"VertexInputRateVertex"
            }
        },
        "pipeline_attributes":[
            {
                "name":"vertex",
                "binding":0,
                "location":0,
                "format":"FormatR32S32G32Sfloat",
                "offset":0
            },
            {
                "name":"normal",
                "binding":0,
                "location":1,
                "format":"FormatR32S32G32Sfloat",
                "offset":12
            },
            {
                "name":"uv",
                "binding":0,
                "location":2,
                "format":"FormatR32S32G32Sfloat",
                "offset":24
            },
            {
                "name":"color",
                "binding":0,
                "location":3,
                "format":"FormatR32S32G32Sfloat",
                "offset":32
            }
        ],
        "layouts":[
            { 
                "name":"layout0",
                "type": "uniform",
                "binding": 0,
                "sets":1,
                "shader_stages":["vertex"],
                "uniform_buffer": "scene_uniforms"
                
            },
            {
                "name":"layout1",
                "type": "uniform_dynamic",
                "binding":1,
                "sets":1,
                "shader_stages":["vertex","fragment"],
                "uniform_buffer":"per_object_uniforms",
                "max_elements": 100
                    
            },
            {
                "name":"layout2",
                "type": "storage_dynamc",
                "binding": 3,
                "sets":1,
                "shader_stages":["vertex","fragment"],
                "uniform_buffer":"position_data",
                "max_elements":1000
            
            }
        ],
        "constants":[
            { 
                "name":"instance",
                "offset":0,
                "size":4,
                "shader_stages":["vertex"]        
            }
        ]   
    }
],
    "vertex_buffers":[
        {
            "name":"vtx_0",
            "size":1024,
            "offset":0 
        }
    ],
    "sampler_buffers":[
        {
            "name":"sampler0",
            "size":1024,
            "offset":0,
            "format":"FormatR8G8B8A8Srgb"
        }
    ],
    "uniform_buffers":[
        {
            "name":"per_object_uniforms",
            "size":576,
            "element_size":192,
            "uniform_elements":3,
            "element_padded_size":256,
            "gpu_allocation_size":768,
            "offset":0 
        },
        {
            "name":"scene_uniforms",
            "size":576,
            "element_size":192,
            "uniform_elements":1,
            "element_padded_size":256,
            "gpu_allocation_size":256,
            "offset":0 
        },
        {   
            "name":"position_data",
            "size":16000,
            "element_size":12,
            "element_padded_size": 16,
            "uniform_elements": 1000,
            "offset":0 
        
        }
    ],
    "indice_buffers":[
       { 
            "name":"indice0",
            "size": 1680,
            "offset":0
        
        }
    ],
    "shader_programs":[
        {
            "name":"program0",
            "sources":[
                {
                    "type":"vertex",
                    "url":"vert.spv"
                }
            ]
    }
    ],
    "renderpasses":[
        {
            "name":"renderpass0",
            "command_buffer":"cmd0",
            "subpasses":[
                {
                        "name":"subpass0",
                        "dependencies":[
                            {
                                "name":"rendertarget_color",
                                "src_subpass": "SubpassExternal",
                                "dst_subpass": 0,
                                "src_mask": "PipelineStageColorAttachmentOutputBit",
                                "src_access_mask":0,
                                "dst_mask":"PipelineStageColorAttachmentOutputBit",
                                "dst_access_mask":"AccessColorAttachmentWriteBit"
                            },
                            {
                                "name":"rendertarget_depth",
                                "src_subpass":"SubpassExternal",
                                "dst_subpass": 0,
                                "src_mask": "PipelineStageEarlyFragmentTestsBit | PipelineStageLateFragmentTestsBit",
                                "src_access_mask": 0,
                                "dst_mask":  "PipelineStageEarlyFragmentTestsBit | PipelineStageLateFragmentTestsBit",
                                "dst_access_mask": "AccessDepthStencilAttachmentWriteBit"
                            }
                            
                        ],
                    "bindpoint":"PipelineBindPointGraphics",
                    "color_attachments":["color_attachment0"],
                    "depth_attachments":["depth_attachment0"],
                    "input_attachments":[ "input_attachment0"],
                    "preserve_attachments":[]
                    
               }
            ]
            
        }
    ],
    "command_buffers":[
        {
            "name":"cmd0",
            "count":1,
            "level":"CommandBufferLevelPrimary",
            "queue":"graphics_queue"
        
        }
    ],
    "queues":[
       {    "name":"graphics_queue",
            "index":0,
            "family": "graphics"
        }
    ],
    "framebuffers":[
        {
            "image_views":[
                {
                "name":"swapchain_color0",
                "view_type": "ImageType2D",
                "format": "FormatR8G8B8A8Srgb",
                "base_mip":0,
                "level_count":1,
                "base_array":0,
                "layer_count":1,
                "aspect_flags":"AspectFlags",
                "tiling":"ImageTilingOptimal",
                "is_per_frame":true,
                "sampling": "SampleCount1Bit",
                "extent":
                    {
                        "width": 1024,
                        "height":1024
                    }
                },
                {
                    "name":"swapchain_color1",
                    "view_type": "ImageType2D",
                    "format": "FormatR8G8B8A8Srgb",
                    "base_mip":0,
                    "level_count":1,
                    "base_array":0,
                    "layer_count":1,
                    "aspect_flags":"AspectFlags",
                    "tiling":"ImageTilingOptimal",
                    "is_per_frame":true,
                    "sampling": "SampleCount1Bit",
                    "extent":
                        {
                            "width": 1024,
                            "height":1024
                        }
                        
                    },
                    {
                        "name":"swapchain_color2",
                        "view_type": "ImageType2D",
                        "format": "FormatR8G8B8A8Srgb",
                        "base_mip":0,
                        "level_count":1,
                        "base_array":0,
                        "layer_count":1,
                        "aspect_flags":"AspectFlags",
                        "tiling":"ImageTilingOptimal",
                        "is_per_frame":true,
                        "sampling": "SampleCount1Bit",
                        "extent":
                            {
                                "width": 1024,
                                "height":1024
                            }
                            
                        },
                        {
                        "name":"swapchain_depth0",
                        "view_type": "ImageType2D",
                        "format": "FormatD32SFloat",
                        "base_mip":0,
                        "level_count":1,
                        "base_array":0,
                        "layer_count":1,
                        "aspect_flags":"AspectFlags",
                        "tiling":"ImageTilingOptimal",
                        "is_per_frame":true,
                        "sampling": "SampleCount1Bit",
                        "extent":
                            {
                                "width": 1024,
                                "height":1024
                            }
                        
                        }
            ],
            "attachments":[
                {
                    "name": "color_attachment0",
                    "image_ref":"swapchain_color0",
                    "layout": "ImageLayoutColorAttachmentOptimal",
                    "format": "FormatR8G8B8A8Srgb",
                    "sample_count": "SampleCount1Bit",
                    "load_op": "AttachmentLoadOpClear",
                    "store_op": "AttachmentStoreOpStore",
                    "stencil_load_op": "AttachmentLoadOpDontCare",
                    "stencil_store_op": "AttachmentStoreOpDontCare",
                    "initial_layout": "ImageLayoutUndefined",
                    "final_layout": "ImageLayoutColorAttachmentOptimal"
                },
                {
                    "name": "color_attachment1",
                    "image_ref":"swapchain_color1",
                    "layout": "ImageLayoutColorAttachmentOptimal",
                    "format": "FormatR8G8B8A8Srgb",
                    "sample_count": "SampleCount1Bit",
                    "load_op": "AttachmentLoadOpClear",
                    "store_op": "AttachmentStoreOpStore",
                    "stencil_load_op": "AttachmentLoadOpDontCare",
                    "stencil_store_op": "AttachmentStoreOpDontCare",
                    "initial_layout": "ImageLayoutUndefined",
                    "final_layout": "ImageLayoutColorAttachmentOptimal"
                },
                {
                    "name": "color_attachment2",
                    "image_ref":"swapchain_color2",
                    "layout": "ImageLayoutColorAttachmentOptimal",
                    "format": "FormatR8G8B8A8Srgb",
                    "sample_count": "SampleCount1Bit",
                    "load_op": "AttachmentLoadOpClear",
                    "store_op": "AttachmentStoreOpStore",
                    "stencil_load_op": "AttachmentLoadOpDontCare",
                    "stencil_store_op": "AttachmentStoreOpDontCare",
                    "initial_layout": "ImageLayoutUndefined",
                    "final_layout": "ImageLayoutColorAttachmentOptimal"
                },
                {
                "name": "depth_attachment0",
                "image_ref":"swapchain_depth0",
                "layout": "ImageLayoutDepthStencileAttachmentOptimal",
                "format": "VK_FORMAT_D32_SFLOAT",
                "sample_count": "SampleCount1Bit",
                "load_op": "AttachmentLoadOpClear",
                "store_op": "AttachmentStoreOpDontCare",
                "stencil_load_op": "AttachmentLoadOpClear",
                "stencil_store_op": "AttachmentStoreOpDontCare",
                "initial_layout": "ImageLayoutUndefined",
                "final_layout": "ImageLayoutDepthStencileAttachmentOptimal"
                }
            ]
        }
    ]
}